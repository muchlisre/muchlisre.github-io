<!doctype html>
<html lang="en" dir="rtl">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <title>Al-Qur'an Ku</title>

    <style media="screen">
      @font-face {
        font-family: fontArab;
        src: url('LPMQ.ttf');
      }
      .arab {
        font-family: fontArab;
      }
    </style>
  </head>
  <body>
    <div class="container">
    <h1>Al-Qur'an</h1>
      <div class="row" id="surah">
        <div class="col">

        </div>

      </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    <script src="jquery.min.js"></script>
    <script type="text/javascript">
    surah();

    function surah(){
      var url_str = window.location.href;
      let url = new URL(url_str);
      let search_params = url.searchParams;
      var surat = search_params.get('surat');
      console.log(url_str);
      if (surat==undefined){
        console.log(surat)
        $.getJSON( "http://103.30.246.230:9090/surah", function( data ) {
          var suratnya="";
          $.each( data.data, function( key, val ) {
            suratnya += '<div class="col-sm-4" onclick="'+ url_str + '?surat=' + val.number+'">';
            suratnya += '<div class="card mb-3"><div class="card-body">';
            suratnya += '<h5 class="card-title arab">'+ val.name.long +'</h5>';
            suratnya += '<p class="card-text">'+ val.name.transliteration.id +'</p>';
            suratnya += '<p class="card-text">'+ val.name.translation.id +'</p>';
            suratnya += '</div></div></div>';
            // suratnya += "<div class='col-sm-4 arab d-grid gap-2' onclick='surah("+val.number+")' id='" + val.number + "'><button class='btn btn-warning btn-lg'>" + val.name.short + "</button></div>";
          });

          $("#surah").html(suratnya);

        });
      }else{
        console.log(surat)
        $.getJSON( "http://103.30.246.230:9090/surah/"+surat, function( data ) {
          var suratnya="";
          $.each( data.data.verses, function( key, val ) {
            suratnya += '<div class="col-12">';
            suratnya += '<div class="card mb-3"><div class="card-body">';
            suratnya += '<h5 class="card-title arab">'+ val.number.inSurah + ". " + val.text.arab +'</h5>';
            // suratnya += '<p class="card-text">'+ val.verses.translation.id +'</p>';
            // suratnya += '<p class="card-text">'+ val.verses.translation.id +'</p>';
            suratnya += '</div></div></div>';
            // suratnya += "<div class='col-sm-4 arab d-grid gap-2' onclick='surah("+val.number+")' id='" + val.number + "'><button class='btn btn-warning btn-lg'>" + val.name.short + "</button></div>";
          });

          $("#surah").html(suratnya);
        });
      }
    }
    </script>
  </body>
</html>
